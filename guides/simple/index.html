<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="Content-Language" content="en-us" />
  <meta http-equiv="imagetoolbar" content="false" />
  <meta name="MSSmartTagsPreventParsing" content="true" />
  <meta name="description" content="How to use SIP.js Simple API to make and receive a call" />
  <meta name="viewport" content="initial-scale=1" />
  <title>Simple | SIP.js</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <link href='//fonts.googleapis.com/css?family=Nunito:400,700,300|Varela+Round' rel='stylesheet' type='text/css'>
  <link href="/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/shared/css/documentation.css" media="screen" rel="stylesheet" type="text/css" />
    
  <link href="/shared/css/pygments.css" media="screen" rel="stylesheet" type="text/css" />
  
  <script src="/shared/js/jquery.js" type="text/javascript"></script>
  <script src="/shared/js/documentation.js" type="text/javascript"></script>
  <link rel="shortcut icon" type="image/x-icon" href="/shared/img/favicon-7.ico"/>
</head>


<body class="guides">
  <div id="dev"></div>
<header id="siteHeader">
  <div class="wrapper">
    <nav id="mainNav">
      <a id="logo-link" href="/"><img id="logo" src="/shared/img/logo.png" alt="sip.js"></a>
      <ul id="full-nav" class="horizontal mobile-hide">
        <li><a href="/download/">Download</a></li>
        <li><a id="api-nav" href="/api/0.15.0/">API</a></li>
        <li><a href="/guides/">Guides</a></li>
        <li><a href="https://github.com/onsip/sip.js" target="_blank">Github</a></li>
        <li><a href="/aboutus/" class="nav-aboutus">About Us</a></li>
        <li><a href="https://groups.google.com/forum/#!forum/sip_js" target="_blank">Support</a></li>
        <li><a href="/faq/">FAQ</a></li>
      </ul>
    </nav>
  </div>
</header>


  <article id="main" class="wrapper group">
    <header id="sectionHeader">
      <h1><a href="/guides/">Guides</a></h1>
    </header>
    <div id="content">
      
<h1 id="disclaimer">Disclaimer</h1>

<p>SIP.js Simple is considered deprecated and we will no longer support it. You should consider upgrading to the <a href="/simple-user">Simple User</a> on the latest SIP.js Version.</p>

<h1 id="sipjs-simple-guide">SIP.js Simple Guide</h1>

<h2 id="overview">Overview</h2>

<p>This guide will walk you through getting up and running with SIP.js Simple. This is the quickest and easiest way to get up and running with SIP.js, but only has the most basic call features supported. If you want to do anything more complex with SIP.js you will need to use the full API.</p>

<h3 id="differences-between-sipjs-simple-and-sipjs">Differences between SIPjs Simple and SIPjs</h3>

<p>TODO</p>

<h2 id="html">HTML</h2>

<p>Create an HTML file. In the file you could include the <a href="/download/">SIP.js library</a>, as well as any other javascript that will be used. We will assume SIP.js is imported as a node module for this demo.</p>

<p>A <code>&lt;video&gt;</code> element is need to display the video stream.  The <code>&lt;video&gt;</code> element adds a standard way for browsers to display video over the internet without additional plugins. This makes <code>&lt;video&gt;</code> elements perfect for WebRTC.</p>

<p>Within the <code>&lt;body&gt;</code> tags, there is a <code>remoteVideo</code> <code>&lt;video&gt;</code> element, to display the video of the person being called.  There is also a <code>localVideo</code> <code>&lt;video&gt;</code> element, to display the video stream that is being sent to the person being called.  The local video stream should always be muted to prevent feedback.</p>

<pre><code class="language-html"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="o">=</span><span class="s">"my-styles.css"</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">video</span> <span class="na">id</span><span class="o">=</span><span class="s">"remoteVideo"</span><span class="p">&gt;&lt;/</span><span class="nt">video</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">video</span> <span class="na">id</span><span class="o">=</span><span class="s">"localVideo"</span> <span class="na">muted</span><span class="o">=</span><span class="s">"muted"</span><span class="p">&gt;&lt;/</span><span class="nt">video</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"my-javascript.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre>

<h2 id="javascript">Javascript</h2>

<h3 id="creating-a-simple-instance">Creating a Simple Instance</h3>

<p>In order to make calls and send messages, create a SIP Simple instance.  Calling the <code>SIP.Web.Simple()</code> method, with options will create a new Simple object. Simple differs from the full SIP.js in that it will handle attaching media onto the page.</p>

<pre><code class="language-javascript"><span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">media</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">local</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">video</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'localVideo'</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="nx">remote</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">video</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'remoteVideo'</span><span class="p">),</span>
          <span class="c1">// This is necessary to do an audio/video call as opposed to just a video call</span>
          <span class="nx">audio</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'remoteVideo'</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nx">ua</span><span class="o">:</span> <span class="p">{}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">simple</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SIP</span><span class="p">.</span><span class="nx">Web</span><span class="p">.</span><span class="nx">Simple</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span></code></pre>

<h3 id="starting-a-call">Starting a call</h3>

<p>After the Simple interface has connected to the SIP server, a new call can be made by calling the <code>.call(target)</code> method.</p>

<pre><code class="language-javascript"><span class="nx">simple</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s1">'bob@example.com'</span><span class="p">);</span></code></pre>

<p>After the call method is invoked, the browser will ask for permission to access the camera and microphone.  Permission must be allowed to make the call.  The person being called has the choice of accepting or rejecting the call.</p>

<p>An <code>endCall</code> button is added to terminate the session using the <code>.hangup()</code> method.</p>

<iframe style="width: 100%; height: 410px" src="https://jsfiddle.net/OnSIP/W93H6/embedded/js,html,css,result/">
</iframe>

<h3 id="answering-a-call">Answering a Call</h3>

<p>To accept a call that is being received, catch the <code>ringing</code> event, then call <code>simple.answer();</code></p>

<pre><code class="language-javascript"><span class="nx">simple</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'ringing'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">simple</span><span class="p">.</span><span class="nx">answer</span><span class="p">();</span>
<span class="p">});</span></code></pre>

<iframe style="width: 100%; height: 600px" src="https://jsfiddle.net/OnSIP/vW7Lw/embedded/js,html,css,result/">
</iframe>

<h3 id="ending-a-call">Ending a Call</h3>

<p>To end a call <code>simple.hangup();</code>. You can call hangup even when the call is ringing to reject it.</p>

<pre><code class="language-javascript"><span class="nx">simple</span><span class="p">.</span><span class="nx">hangup</span><span class="p">();</span></code></pre>

    </div>

    <nav id="sideNav">
  <ul>
    <li><a href="/guides/">Overview</a></li>
    <li class="parent">
      <a class="parent" href="/guides/server-configuration/">Server Configuration</a>
      <ul>
        <li><a href="/guides/server-configuration/freeswitch/">FreeSWITCH</a></li>
        <li><a href="/guides/server-configuration/asterisk/">Asterisk</a></li>
        <li><a href="/guides/server-configuration/onsip-network/">OnSIP</a></li>
      </ul>
    </li>
    <li><a href="/guides/simple-user/">Simple User</a></li>
    <li><a href="/guides/user-agent/">User Agent</a></li>
    <li><a href="/guides/make-call/">Make a Call</a></li>
    <li><a href="/guides/receive-call/">Receive a Call</a></li>
    <li><a href="/guides/end-call/">End a Call</a></li>
    <li><a href="/guides/attach-media/">Attach Media</a></li>
    <li><a href="/guides/send-dtmf/">Send DTMF</a></li>
    <li><a href="/guides/send-message/">Send Message</a></li>
    <li><a href="/guides/transfer/">Make a Transfer</a></li>
    <li><a class="last" href="/guides/full-demo-app/">Application Demo</a></li>
  </ul>
</nav>


  </article>

  <footer class="light-gray-bg">
  <div class="wrapper">
    <div id="onsip-stamp">
      <span id="made-by-prefix">made by</span>
      <a href="http://developer.onsip.com" id="onsip"></a>
    </div>
    <nav class="left">
      <ul class="horizontal">
        <li><a href="https://groups.google.com/forum/#!forum/sip_js" target="_blank">Mailing List</a></li>
        <li><a href="https://github.com/onsip/sip.js/issues" target="_blank">Report Issues</a></li>
        <li><a href="/license/">License</a></li>
      </ul>
    </nav>
    <nav class="right">
      <ul class="horizontal">
        <li><a href="https://travis-ci.org/onsip/SIP.js"><img src="https://travis-ci.org/onsip/SIP.js.png?branch=master"/></a></li>
        <li><a href="http://onsip.com/blog" target="_blank">Blog</a></li>
        <li><a href="/aboutus/">About</a></li>
        <li><a href="/faq/">FAQ</a></li>
      </ul>
    </nav>
    <div class="clearfix"></div>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1008379-16', 'sipjs.com');
  ga('send', 'pageview');
</script>
<script>
  // Remove all 'no-js-hide' classes because Javascript is working
  $(function () {
      $('.no-js-hide').each(function (i, e) {
          $(e).removeClass('no-js-hide');
      });
      $('.no-js-block').each(function (i, e) {
          $(e).removeClass('no-js-block');
      });
  });
</script>


</body>
</html>
